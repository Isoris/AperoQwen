<!DOCTYPE html>
<html lang="en" dir="ltr"><head>
  
                           
     


<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.83.1" />
<title>The netlify.toml File | Quentin Andres</title>








  
    
  
<meta name="description" content="Why you should use a netlify.toml file in your blogdown site.">


<meta property="og:site_name" content="Quentin Andres">
<meta property="og:title" content="The netlify.toml File | Quentin Andres">
<meta property="og:description" content="Why you should use a netlify.toml file in your blogdown site." />
<meta property="og:type" content="page" />
<meta property="og:url" content="https://qwentee.netlify.app/blog/2019-02-spoonful-netlify-toml/" />
<meta property="og:locale" content="en">




    
        <meta property="og:image" content="https://qwentee.netlify.app/blog/spoonful-hugo/sidebar.jpg" >
        <meta property="twitter:card" content="summary_large_image">
        <meta name="twitter:image" content="https://qwentee.netlify.app/blog/spoonful-hugo/sidebar.jpg" >
    
    
  <meta itemprop="name" content="The netlify.toml File">
<meta itemprop="description" content="&ldquo;Just a spoonful of Hugo helps the blog go down.&rdquo;
  me, only somewhat kidding  You can read the previous post about my &ldquo;Spoonful of Hugo&rdquo; series here. In this series, I&rsquo;m sharing small spoonfuls of Hugo that I have learned that hopefully can help you get your site UP (and even better- more efficient, more streamlined, more automated).
This is my second post in this series, and it is a relatively quick one."><meta itemprop="datePublished" content="2019-02-20T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2019-02-20T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="869">
<meta itemprop="keywords" content="hugo," />
  
  <!--[if IE]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  <link rel="shortcut icon" href="/img/blogophonic-mark-dark.png" type="image/x-icon">
  <link rel="icon" href="/img/blogophonic-mark-dark.png" type="image/x-icon">
  
  
  <link rel="stylesheet" href="/style.main.min.12cb3f7b90c5da6b85310c2768c86c54b2edddb03c7d0dfa69b751332112b867.css" integrity="sha256-Ess/e5DF2muFMQwnaMhsVLLt3bA8fQ36abdRMyESuGc=" media="screen">
  
  
  <script src="/panelset.min.d74e921a1b9af2d938fdff19e433ba539cdb202961eddae2356a54199f0653ec.js" type="text/javascript"></script>
  
  
  <script src="/main.min.38a0323c5b0bbb611c4874ba2d8fdaba57d20cc2b0d704b30250c235ba8b6d49.js" type="text/javascript"></script>
  
  <script data-goatcounter="https://alison.goatcounter.com/count"
        async src="//gc.zgo.at/count.js"></script>
</head>
<body>
      <div class="grid-container single-series">
<header class="site-header pt4 pb2 mb4 bb b--transparent ph5 headroom z-max" role="banner">
  <nav class="site-nav db dt-l w-100" role="navigation">
    <a class="site-brand db dtc-l v-mid link no-underline w-100 w-33-l tc tl-l" href="https://qwentee.netlify.app" title="Home">
      <img src="/img/blogophonic-mark-dark.png" class="dib db-l h2 w-auto" alt="Quentin Andres">
    </a>
    <div class="site-links db dtc-l v-mid w-100 w-47-l tc tr-l mt3 mt0-l ttu tracked">
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="/about/" title="About me">About</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 active" href="/blog/" title="Blog">Blog</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="/project/" title="Project Portfolio">Projects</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="/talk/" title="Talks">Talks</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="/gallery2/" title="Gallery">Gallery</a>
      
        
        
        
      <a class="link f6 f5-l dib pv1 ph2 " href="/resume/" title="Resum√©">My Resum√©</a>
      
      
    </div>
  </nav>
</header>

                       
<main class="page-main pa4" role="main">
  <section class="page-content mw7 center">
    <article class="post-content pa0 pl3-l">
      <header class="post-header">
        <h1 class="f1 lh-solid measure-narrow mb3 fw4">The netlify.toml File</h1>
        
        <p class="f6 measure lh-copy mv1">By Alison Hill in <a href="https://qwentee.netlify.app/categories/theme-features">Theme Features</a>  <a href="https://qwentee.netlify.app/categories/r">R</a> </p>
        <p class="f7 db mv0 ttu">February 20, 2019</p>
      </header>
      <section class="post-body pt5 pb4">
        <blockquote>
<p>&ldquo;Just a spoonful of Hugo helps the blog go down.&rdquo;</p>
</blockquote>
<ul>
<li>me, only somewhat kidding</li>
</ul>
<p>You can read the previous post about my &ldquo;Spoonful of Hugo&rdquo; series 
<a href="/post/2019-02-19-hugo-archetypes/">here</a>. In this series, I&rsquo;m sharing small spoonfuls of Hugo that I have learned that hopefully can help you get your site <em>UP</em> (and even better- more efficient, more streamlined, more automated).</p>
<p>This is my second post in this series, and it is a relatively quick one. Just do this. This one is a no-brainer.</p>
<div class="alert alert-note">
  <div>
    Thanks to <a href="https://twitter.com/dataandme">Mara Averick</a> for alerting me that with Hugo version 0.54.0 and onward, there is a trailing zero at the end of <a href="https://github.com/gohugoio/hugo/issues/5639">Hugo versions now</a>. So for versions before 0.54.0, use the format: 0.53; for later versions use 0.54.0 (0.54 will not work).
  </div>
</div>




<h2 id="use-netlify-to-deploy">Use Netlify to Deploy
  <a href="#use-netlify-to-deploy"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h2>
<p>First, you&rsquo;ll need to use Netlify! I am a very happy Netlify user and currently have approximately 33 sites deployed. To setup a new account, navigate to 
<a href="https://www.netlify.com/" target="_blank" rel="noopener">Netlify</a> and click on the <em>Sign Up</em> link.</p>
<p><img src="https://arm.rbind.io/slides/img/netlify-landing.png" alt=""></p>
<p>Sign up with <em>GitHub</em> to connect your GitHub and Netlify accounts (as shown below).</p>
<p><img src="netlify-sign-up.png" alt=""></p>
<p>If you use a different version control service, select GitLab or BitBucket instead.</p>
<p>The last step is to use the Netlify UI in browser do <em>New Site from Git</em> &gt; pick your repo. You&rsquo;ll be prompted to fill in these fields, they are probably already filled in correctly for you:</p>
<p><img src="netlify-deploy-settings.png" alt=""></p>
<p>The next part is the advanced build settings:</p>
<p><img src="netlify-adv-build.png" alt=""></p>
<p>See that <strong>pro tip</strong> about the netlify.toml? Let&rsquo;s do that! You can leave these fields as is.</p>




<h2 id="why-netlifytoml">Why netlify.toml?
  <a href="#why-netlifytoml"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h2>
<p>In their 
<a href="https://www.netlify.com/docs/build-gotchas/" target="_blank" rel="noopener"><strong>Build Gotchas</strong></a>:</p>
<blockquote>
<p>&ldquo;If your build works locally, the next debugging step is to ensure the package versions we use to build match yours. You can find the settings for these in the 
<a href="https://www.netlify.com/docs/build-settings/" target="_blank" rel="noopener">Build Settings</a> doc. That‚Äôs the leading cause of build failure.&rdquo;</p>
</blockquote>
<p>Yes that is right- package version mismatches are the leading cause of build failure with Netlify. What does this look like for blogdown users? This means that you are running a version of Hugo locally that doesn&rsquo;t match the version that Netlify is using to build your site. Most of the time, you are using a more recent version of Hugo than the one Netlify uses. This means that the files your theme relies on may be using newer Hugo functions that were introduced in later Hugo versions- functions that Netlify won&rsquo;t be able to find working from an older Hugo version. You&rsquo;ll get <em>all the build errors</em>.</p>
<p>You can check your local Hugo version by running this code in your R console:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-r" data-lang="r">blogdown<span style="color:#000;font-weight:bold">::</span><span style="color:#900;font-weight:bold">hugo_version</span>()
</code></pre></div><pre><code>## [1] '0.80.0'
</code></pre><p>Now, we want Netlify to use this same version of Hugo when it builds your site. You can do this two ways:</p>
<ol>
<li>Do this in your browser (üëé)</li>
<li>Do this in your project root directory in a netlify.toml file (üëç)</li>
</ol>




<h2 id="add-the-netlifytoml-file">Add the netlify.toml File
  <a href="#add-the-netlifytoml-file"><svg class="anchor-symbol" aria-hidden="true" height="26" width="26" viewBox="0 0 22 22" xmlns="http://www.w3.org/2000/svg">
      <path d="M0 0h24v24H0z" fill="currentColor"></path>
      <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76.0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71.0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71.0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76.0 5-2.24 5-5s-2.24-5-5-5z"></path>
    </svg></a>
</h2>
<p>Adding this file means that team members can see for themselves what version of Hugo you are running- if it is buried in the Netlify UI, you can&rsquo;t see that information unless you sift through the public build logs (no thanks). Making the file as plain text in the root of your blogdown project directory means that:</p>
<ul>
<li>it is version controlled (yay!) and</li>
<li>other people who use/learn from/contribute to your blog can <em>actually</em> reproduce your site with the same site configuration.</li>
<li><strong>Bonus:</strong> you can set the Hugo versions for branch deploys too.</li>
</ul>
<p>Here is an example from my own 
<a href="https://github.com/rbind/apreshill/blob/master/netlify.toml" target="_blank" rel="noopener">netlify.toml</a> file^[the leading zero matters for Hugo versions, so 0.53 works but .53 will not. For versions &gt;= 0.54.0, the trailing zero also matters, so 0.54.0 works but 0.54 will not.]:</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-toml" data-lang="toml">[build] 
  publish = <span style="color:#d14">&#34;public&#34;</span>
  command = <span style="color:#d14">&#34;hugo&#34;</span>

[context.production.environment]
  HUGO_VERSION = <span style="color:#d14">&#34;0.54.0&#34;</span> <span style="color:#998;font-style:italic"># if older, use format: 0.53 (no trailing zero)</span>
  HUGO_ENV = <span style="color:#d14">&#34;production&#34;</span>
  HUGO_ENABLEGITINFO = <span style="color:#d14">&#34;true&#34;</span>
  
[context.branch<span style="color:#a61717;background-color:#e3d2d2">-</span>deploy.environment]
  HUGO_VERSION = <span style="color:#d14">&#34;0.54.0&#34;</span> <span style="color:#998;font-style:italic"># if older, use format: 0.53 (no trailing zero)</span>

[context.deploy<span style="color:#a61717;background-color:#e3d2d2">-</span>preview.environment]
  HUGO_VERSION = <span style="color:#d14">&#34;0.54.0&#34;</span>
</code></pre></div><p>You can leave off the last two chunk if you don&rsquo;t want to use 
<a href="https://www.netlify.com/blog/2017/11/16/get-full-control-over-your-deployed-branches/" target="_blank" rel="noopener">branch deploys</a> or 
<a href="https://www.netlify.com/blog/2016/07/20/introducing-deploy-previews-in-netlify/" target="_blank" rel="noopener">preview deploys</a>, but I ‚ù§Ô∏è these two Netlify features and encourage you to try them out. I&rsquo;ve starting drafting individual blog posts and tutorials in branches, and then I can see them rendered and share them for feedback without asking collaborators to clone and build the repository locally. It is <strong>lovely</strong>. Every branch and pull request gets a link üéâ.</p>
<p>So add this file to your blogdown site repo and push to GitHub.</p>
<p>Note that, according to the 
<a href="https://www.netlify.com/docs/netlify-toml-reference/" target="_blank" rel="noopener">Netlify docs</a>:</p>
<blockquote>
<p>&ldquo;During a build, the following ordering determines which context covers a particular deploy: UI settings are overridden if a netlify.toml file is present in the root folder of the repo and there exists a setting for the same property/redirect/header in the toml file.&rdquo;</p>
</blockquote>
<p>If you look in your site&rsquo;s Netlify deploy log, you should see entries like this:</p>
<pre><code>7:47:13 PM: Found netlify.toml. Overriding site configuration
7:47:13 PM: Starting build script
7:47:13 PM: Installing dependencies
7:47:14 PM: Started restoring cached node version
7:47:17 PM: Finished restoring cached node version
7:47:18 PM: v8.15.0 is already installed.
7:47:19 PM: Now using node v8.15.0 (npm v6.4.1)
7:47:19 PM: Attempting ruby version 2.3.6, read from environment
7:47:20 PM: Using ruby version 2.3.6
7:47:20 PM: Using PHP version 5.6
7:47:20 PM: Installing Hugo 0.54.0
</code></pre><p>Success!</p>

      </section>
      <footer class="post-footer">
        <div class="post-pagination dt w-100 mt4 mb2">
  
    <a class="prev dtc pr2 tl v-top fw6"
    href="https://qwentee.netlify.app/blog/2019-02-spoonful-bundles/">&larr; Hugo Page Bundles</a>
  
  
</div>

      </footer>
    </article>
    
  </section>
</main>

<aside class="page-sidebar" role="complementary">
                         
 


                       
 











  <img src="/blog/2019-02-spoonful-netlify-toml/sidebar-inverse.jpg" class="db ma0">


<div class="blog-info ph4 pt4 pb4 pb0-l">
  

  <h1 class="f3">A Spoonful of Hugo</h1>
  <p class="f6 lh-copy measure">Small spoonfuls of Hugo I collect that may help you get your site up and running even better: more efficient, more streamlined, more automated.</p>
  <p class="f7 measure lh-copy i mh0-l">Written by Alison Hill</p>


  
</div>




                         
 



<div class="flex items-start sticky ph4 pb4">
  <div class="w-two-thirds w-50-l ph0">
    
    <h2 class="mt3 mb3 f5 fw7 ttu tracked"><a class="no-underline dim" href="/blog/spoonful-hugo/">In this series</a></h2>
    <nav id="SeriesTableOfContents">
        <ul>
        
          
          <li class="active" hugo-nav="/blog/2019-02-spoonful-netlify-toml/"><a href="https://qwentee.netlify.app/blog/2019-02-spoonful-netlify-toml/">The netlify.toml File</a></li>
        
          
          <li class="" hugo-nav="/blog/2019-02-spoonful-bundles/"><a href="https://qwentee.netlify.app/blog/2019-02-spoonful-bundles/">Hugo Page Bundles</a></li>
        
          
          <li class="" hugo-nav="/blog/2020-12-how-much-hugo/"><a href="https://qwentee.netlify.app/blog/2020-12-how-much-hugo/">How much Hugo do I need to know?</a></li>
        
          
          <li class="" hugo-nav="/blog/2019-03-spoonful-troubleshooting/"><a href="https://qwentee.netlify.app/blog/2019-03-spoonful-troubleshooting/">Troubleshooting Your Build</a></li>
        
          
          <li class="" hugo-nav="/blog/2019-02-spoonful-archetypes/"><a href="https://qwentee.netlify.app/blog/2019-02-spoonful-archetypes/">Hugo Archetypes</a></li>
        
        </ul>
      </nav>
  </div>
  <details open id="PageTableOfContents">
    <summary><h2 class="mv0 f5 fw7 ttu tracked dib">On this page</h2></summary>
    <div class="pl2 pr0 mh0">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#use-netlify-to-deploy">Use Netlify to Deploy</a></li>
    <li><a href="#why-netlifytoml">Why netlify.toml?</a></li>
    <li><a href="#add-the-netlifytoml-file">Add the netlify.toml File</a></li>
  </ul>
</nav>
    </div>
  </details>
  
</div>
</aside>

<footer class="site-footer pv4 bt b--transparent ph5" role="contentinfo">
  <nav class="db dt-l w-100">
    <p class="site-copyright f7 db dtc-l v-mid w-100 w-33-l tc tl-l pv2 pv0-l mv0 lh-copy">
      &copy; 2021 Quentin Andres
      <span class="middot-divider"></span>
      Made with <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title"><a xmlns:dct="http://purl.org/dc/terms/" href="https://github.com/hugo-apero/" rel="dct:source">Hugo Ap√©ro</a></span>.
      <br />
      
Based on <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title"><a xmlns:dct="http://purl.org/dc/terms/" href="https://github.com/formspree/blogophonic-hugo" rel="dct:source">Blogophonic</a></span> by <a xmlns:cc="http://creativecommons.org/ns#" href="https://formspree.io" property="cc:attributionName" rel="cc:attributionURL">Formspree</a>.
    </p>
    
    <div class="site-social-links db dtc-l v-mid w-100 w-33-l tc pv2 pv0-l mv0">
      <div class="social-icon-links" aria-hidden="true">
  
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://twitter.com/Isoris9" title="twitter" target="_blank" rel="noopener">
      <i class="fab fa-twitter fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://github.com/Isoris" title="github" target="_blank" rel="noopener">
      <i class="fab fa-github fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://www.youtube.com/channel/UC_t2m2GgVjcPdkClekxY5yQ" title="youtube" target="_blank" rel="noopener">
      <i class="fab fa-youtube fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="https://www.linkedin.com/in/quentinandres/" title="linkedin-in" target="_blank" rel="noopener">
      <i class="fab fa-linkedin-in fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="/" title="discord" >
      <i class="fab fa-discord fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="/" title="facebook" >
      <i class="fab fa-facebook fa-lg fa-fw"></i>
    </a>
  
    
    
    
      
    
    
    
    
    
      
    
    <a class="link dib h1 w1 ml0 mr2 f6 o-90 glow" href="/" title="instagram" >
      <i class="fab fa-instagram fa-lg fa-fw"></i>
    </a>
  
</div>

    </div>
    
    <div class="site-links f6 db dtc-l v-mid w-100 w-67-l tc tr-l pv2 pv0-l mv0">
      
      <a class="dib pv1 ph2 link" href="/license/" title="License">License</a>
      
      <a class="dib pv1 ph2 link" href="/contact/" title="Contact form">Contact</a>
      
      <a class="dib pv1 ph2 link" href="/blog/index.xml" title="RSS">RSS</a>
      
    </div>
  </nav>
</footer>

      </div>
    </body>
</html>
